<h3><a href="https://github.com/ibmendoza/anchor">https://github.com/ibmendoza/anchor</a></h3>

<p>Anchor is a script-based configuration management tool that adheres to UNIX philosophy.</p>

<h3>Anchor CM is just a tool</h3>

<p>By itself, Anchor does not do anything. The secret sauce is in the cmdfile. Anchor CM is just a script preprocessor which enables you to compute data beforehand and feed it as flags to corresponding infrastructure software.</p>

<h3>Use interface, not leaky abstraction</h3>

<p>Anchor CM tool invokes the command-line interface (CLI) of infrastructure software (e.g. bash, serf, consul, OpenStack, AWS, gcutil, VBoxManage, etc).</p>

<p>Chef, Puppet, Ansible and Salt are leaky abstractions like ORM, forever chasing a moving target which is the CLI of programs that actually matter.</p>

<h3>Division of labor</h3>

<p>Specific tasks can be encapsulated as roles and can be included in a script as cmdfile</p>

<h3>Push-based workflow</h3>

<p>A push-based workflow of configuration management is easier to reason about. Once you have gathered your artifacts like source code, binaries, files, images, etc to your control machine, for example a local computer or VM in public cloud, those artifacts can be pushed to your remote machine/host (the one being configured) through SSH.</p>

<p>Pushing artifacts to multiple hosts in an efficient manner is left to the user or can be delegated to another project as separate orchestration tool (e.g. using <em>github.com/ibmendoza/go_ne</em> and <em>github.com/gophergala/scpm</em>).</p>

<h3>Infrastructure as data</h3>

<p>A shell script is the simplest form of infrastructure as data but it has limitations.</p>

<p>Dockerfile is simple and intuitive but it is limited to Docker containers only.</p>

<p>Taking a cue from Dockerfile, we can design a script file called but not to be executed by your favorite shell. Instead, it will be executed by our CM runtime such that it follows the principles described in this README file.</p>

<p>The cmdfile is a virtual script since it is preprocessed by the CM runtime.</p>

<p>Click <a href="https://github.com/ibmendoza/anchor/blob/master/DSL.md">here</a> for DSL specification.</p>

<h3>Infrastructure as code</h3>

<p>Like developer code, a cmdfile must be tested and stored in a version control system along with config files and others. Large binary files like OS images must be stored elsewhere (file store or object storage)</p>

<h3>Simple error handling</h3>

<p>The CM tool must stop execution at the first occurrence of error.</p>

<h3>Tool-agnostic</h3>

<p>Any software tool or runtime can be used as long as it exposes a CLI (command line interface). There is no need to prepackage the tool into a CM module since the tool itself acts as the module. Anchor CM is simply a glue that holds and orchestrates a certain process or workflow. Hence, you can use any of your favorite shell or scripting language</p>

<h3>Usage</h3>

<pre><code>go get github.com/ibmendoza/anchor

anchor /path/to/cmdfile
</code></pre>

<h3>Mutable vs Immutable Infrastructure</h3>

<p>Immutable infrastructure as defined by <a href="http://blog.codeship.com/immutable-deployments/">Codeship</a> works best for servers that work at the application tier (see <a href="http://en.wikipedia.org/wiki/Multitier_architecture">http://en.wikipedia.org/wiki/Multitier_architecture</a>). However, it is not a silver bullet particularly at the data tier. Configuration management is a fine-grained solution to situations where an all-or-nothing old-server-teardown/spin-new-server workflow is not acceptable.</p>

<p>In short, configuration management is complementary to immutable infrastructure. You just need to know the differences  where it matters.</p>

<h3>License</h3>

<p>MIT</p>

<h3>Author</h3>

<p>Isagani Mendoza</p>

<h3>Acknowledgment</h3>

<p>Special thanks to James Rutherford &amp; Tobias Haar for their <a href="https://github.com/gophergala/go_ne">GoKiss project</a> which works with Anchor CM tool</p>
